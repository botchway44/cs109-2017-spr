<head>

<title>CS109</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta http-equiv="content-type" content="text/html; charset=UTF8">


<link href="//cs109.stanford.edu/plugins/bootstrap-custom/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="//cs109.stanford.edu/style.css">

<!-- Java Script -->
<script src="//cs109.stanford.edu/plugins/jquery.min.js"></script>
<script src="//cs109.stanford.edu/plugins/moment.min.js"></script>
<script src="//cs109.stanford.edu/plugins/bootstrap-custom/js/bootstrap.min.js"></script>
<script src="//cs109.stanford.edu/plugins/ace/ace.js" type="text/javascript"></script>

<!-- Probability Packages -->
<script src="//cs109.stanford.edu/plugins/probability/gaussian.js"></script>
<script src="//cs109.stanford.edu/plugins/color.js"></script>


<!-- Stanford -->
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600,700' rel='stylesheet' type='text/css'>

	<script type="text/x-mathjax-config">
	  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	</script>

	<script src="http://cdnjs.cloudflare.com/ajax/libs/mathjs/3.1.0/math.min.js"></script>
	<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>


</head>
<body>

	<!-- Navigation Bar -->
<nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand brand" href="//cs109.stanford.edu//">CS109</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

        <!--<li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Lectures <span class="caret"></span></a>
          <ul class="dropdown-menu">

          </ul>
        </li>-->

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Lecture Notes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="//cs109.stanford.edu/pdfs/02 Counting.pdf">1 - Counting</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/2 Combinatorics.pdf">2 - Combinatorics</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/3 Probability.pdf">3 - Probability</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/4 Conditional Probability.pdf">4 - Conditional Probability</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/5 Independence.pdf">5 - Independence</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/6 Random Variables.pdf">6 - Random Variables</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/7 Variance.pdf">7 - Variance</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/8 More Discrete.pdf">8 - Poisson and More</a></li>
            <li><a href="//cs109.stanford.edu/lectureHandouts/9 Continuous Variables.pdf">9 - Continuous Variables</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/10 Gauss.pdf">10 - Gauss</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/11 Exponential and Joint.pdf">11 - Exponential and Joint</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/12 Continuous and Multinomial Joint.pdf">12 - Continuous and Multinomial Joint</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/13 Properties of Joint Distributions.pdf">13 - Properties of Joint Distributions</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/14 Convolution and Conditional.pdf">14 -  Convolution and Conditional</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/15 Beta.pdf">15 -  Beta</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/16 Great Expectations.pdf">16 -  Great Expectations</a></li>
             <li><a href="//cs109.stanford.edu/lectureHandouts/17 Covariance and Correlation.pdf">17 - Covariance and Correlation</a></li>
            <!--<li><a href="//cs109.stanford.edu/pdfs/05 Combinatorics.pdf">5 - Combinatorics</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/06 Probability.pdf">6 - Probability</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/07 CondProbability.pdf">7 - Conditional Probability</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/08 Independence.pdf">8 - Independence</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/10 Random Variables.pdf">10 - Random Variables</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/11 Variance.pdf">11 - Variance</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/12 Poisson.pdf">12 - Poisson and More</a></li>

            <li><a href="//cs109.stanford.edu/pdfs/13 Continuous.pdf">13 - Continuous RV</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/16 Gaussian.pdf">16 - Gaussian</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/17 StandardNormalTable.pdf">17 - Standard Normal</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/18 Joint.pdf">18 - Joint Distributions</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/19 MoreJointProperties.pdf">19 - More Joint Properties</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/20 ConvolutionAndConditional.pdf">20 - Convolution and Conditional</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/22 Beta.pdf">22 - Beta Distributions</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/27 VarianceFromEvents.pdf">27 - Variance From Events</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/28 CovarianceAndSamples.pdf">28 - Covariance and Samples</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/29 Correlation.pdf">29 - Correlation</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/30 CondExpectation.pdf">30 - Conditional Expectation</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/31 CentralTheorems.pdf">31 - Central Theorems</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/34 ParameterEstimation.pdf">34 - Parameter Estimation</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/35 MaximumLikelihood.pdf">35 - Maximum Likelihood</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/37 MaximumAPosteriori.pdf">37 - Maximum A Posteriori</a></li>

            <li><a href="//cs109.stanford.edu/pdfs/39 NaiveBayes.pdf">39 - Naive Bayes</a></li>

            <li><a href="//cs109.stanford.edu/pdfs/40 LogisticRegression.pdf">40 - Logistic Regression</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/41 DeepLearning.pdf">41 - Deep Learning</a></li>-->
            
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Problem Sets<span class="caret"></span></a>
          <ul class="dropdown-menu">

             <li><a href="//cs109.stanford.edu/restricted/ProblemSet1Soln.pdf">PSet 1 Solutions</a></li>

              <li><a href="//cs109.stanford.edu/restricted/ProblemSet2Soln.pdf">PSet 2 Solutions</a></li>

            <li role="separator" class="divider"></li>
            
            <li><a href="//cs109.stanford.edu/pdfs/04 ProblemSet1.pdf">Problem Set 1</a></li>
            <li><a href="//cs109.stanford.edu/psets/pset2.html">Problem Set 2</a></li>
            <li><a href="//cs109.stanford.edu/psets/pset3.html">Problem Set 3</a></li>
            <li><a href="//cs109.stanford.edu/psets/pset4.html">Problem Set 4</a></li>
            <!--<li><a href="//cs109.stanford.edu/pdfs/09 ProblemSet2.pdf">Problem Set 2</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/15 ProblemSet3.pdf">Problem Set 3</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/23 ProblemSet4.pdf">Problem Set 4</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/32 ProblemSet5.pdf">Problem Set 5</a></li>
            <li><a href="//cs109.stanford.edu/pdfs/38 ProblemSet6.pdf">Problem Set 6</a></li>-->
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Resources<span class="caret"></span></a>
          <ul class="dropdown-menu">
           <li><a href="//cs109.stanford.edu/pdfs/01 Administrivia.pdf">Administrivia</a></li>
           <li><a href="//cs109.stanford.edu/pdfs/03 CalculationRef.pdf">Calculation Reference</a></li>
           <li><a href="//cs109.stanford.edu/lectures/5a-PythonTut.pdf">Python Tutorial (slides)</a></li>
          <li><a href="//cs109.stanford.edu/pdfs/17 StandardNormalTable.pdf">Standard Normal (Phi)</a></li>
          <li><a href="//cs109.stanford.edu/pdfs/25 Notation.pdf">Notation Reference</a></li>
          <li><a href="//cs109.stanford.edu/pdfs/PracticeMidterm.pdf">Practice Midterm</a></li>
          <li><a href="//cs109.stanford.edu/pdfs/PracticeMidtermSoln.pdf">Practice Midterm Soln</a></li>
          <li><a href="//cs109.stanford.edu/courseReader.html">Course Reader (in progress)</a></li>

           <li role="separator" class="divider"></li>

           <li><a href="//cs109.stanford.edu/pdfs/Extra Problems 1.pdf">Extra Problems #1</a></li>
          <li><a href="//cs109.stanford.edu/pdfs/Extra Problems 1 Soln.pdf">Extra Problems #1 Soln</a></li>

          <li><a href="//cs109.stanford.edu/pdfs/Extra Problems 2.pdf">Extra Problems #2</a></li>
          <li><a href="//cs109.stanford.edu/pdfs/Extra Problems 2 Soln.pdf">Extra Problems #2 Soln</a></li>
           <!--
           <li><a href="//cs109.stanford.edu/pdfs/21 PracticeMidterm.pdf">Practice Midterm</a></li>
           <li><a href="//cs109.stanford.edu/pdfs/24 PracticeMidtermSoln.pdf">Practice Midterm Soln</a></li>
           <li><a href="//cs109.stanford.edu/pdfs/26 MidtermReviewSession.pdf">Midterm Review Session</a></li>
           
           <li><a href="//cs109.stanford.edu/handouts/videoExamples.html">Video Examples</a></li>
           <li><a href="//cs109.stanford.edu/problem12.html">Titanic Dataset</a></li>
           <li><a href="//cs109.stanford.edu/handouts/datasets.html">Machine Learning Datasets</a></li>
           <li><a href="//cs109.stanford.edu/pdfs/42 PracticeFinal.pdf">Practice Final</a></li>
           <li><a href="//cs109.stanford.edu/pdfs/43 PracticeFinalSoln.pdf">Practice Final Soln</a></li>
           <li><a href="//cs109.stanford.edu/handouts/extraProblems.html">Extra Practice Problems</a></li>-->

          </ul>
        </li>



        

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Demos <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="//cs109.stanford.edu/demos/serendipity.html">Serendipity</a></li>
            <li><a href="//cs109.stanford.edu/demos/naturalBayes.html">Medical Tests</a></li>
            <li><a href="//cs109.stanford.edu/code/weather.zip">Hurricane Poisson</a></li>
            <li><a href="//cs109.stanford.edu/demos/cdf.html">Normal Calculator</a></li>
            <li><a href="//cs109.stanford.edu/demos/imageDist.html">CS109 Logo</a></li>
            <li><a href="//cs109.stanford.edu/demos/beta.html">Beta</a></li>
            <!--
            <li><a href="//cs109.stanford.edu/demos/jurors.html">Representative Juries</a></li>
            
            
            <li><a href="//cs109.stanford.edu/demos/beta.html">Beta</a></li>
            <li><a href="//cs109.stanford.edu/demos/likelihood/">Likelihood</a></li>-->

          </ul>
        </li>

        <li><a href="//cs109.stanford.edu/handouts/staff.html">Office Hours</a></li>
       
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a href="//cs109.stanford.edu/schedule.html"><span class="glyphicon glyphicon-th-large" aria-hidden="true"></span> Schedule</a></li>
      </ul>
      
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

	<div class="container">
			
		<!-- Header -->
		<div class="row">
			<div class="col-sm-12">
				<div id="pageHeader">
					<h1>
						Serendipity
					</h1>
					<p class="subtleHeading">
						April 1st, 2016
					</p>

				</div>
				<hr/>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-12">

				
				
					<p>
						<center>
					<img src = "//cs109.stanford.edu/img/random/serendip.jpg" style="max-width:100%"></img>
				</center>
				</p>
				<p>
					<center>
					<i>The word serendipity comes from the  Persian fairy tale of the <a href="https://en.wikipedia.org/wiki/The_Three_Princes_of_Serendip">Three Princes of Serendip</a></i>
					</center>
				</p>
				</center>
			</p>
			<hr/>
				<h2>Problem</h2>
				<p>
					What is the probability of a seredipitous encounter with a friend? Imagine you are live in an area with a large general population (eg Stanford with 16,000 students). A small subset of the population are friends. What are the chances that you run into at least one friend if you see a handful of people from the population? Assume that seeing each person from the population is equally likely.
				</p>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-12">
				  <div class="form-group">
				    <label for="exampleInputEmail1">Total Population</label>
				    <input type="number" class="form-control" id="totalPopulation" value="20000">
				  </div>
				  <div class="form-group">
				    <label for="exampleInputPassword1">Friends</label>
				    <input type="number" class="form-control" id="friends" value="150">
				  </div>
				  <div class="form-group">
				    <label for="exampleInputPassword1">People that you see</label>
				    <input type="number" class="form-control" id="seen" value="100">
				  </div>
				  
				  <button type="submit" class="btn btn-success" onclick="calculate();">Calculate</button>

				  <hr/>

				  <h2>Answer</h2>
				  <p>
				  	The probability that you see at least one friend is: <span class="ansValue"></span>
				  </p>
				 
				  <div id="explination" style="display:none">
				  	 <hr/>
					  <h2>Terms</h2>
					  <div id="answer">
					  	<p>
					  		First lets define some useful terms:<br/>
					  		$p$ = total population = <span id="popValue"></span><br/>
					  		$s$ = people seen = <span id="seenValue"></span><br/>
					  		$f$ = num friends = <span id="friendsValue"></span>
					  	</p>
					  	<hr/>
					  	<h2>Approach</h2>
					  	<p>
					  		Since each way of seing $s$ people is equally likely, we can use the "<a href="//cs109.stanford.edu/pdfs/HO06 Probability.pdf">Equally Likely Events</a>" probability calculation: 
					  	</p>

					  	<p style="font-size:120%">
					  		$P(E) = \frac{|E|}{|S|}$
					  	</p>
					  		Where $S$ is the sample set (all the ways of seing $s$ people) and $E$ is the event set (all the ways of seing $s$ people where at least one is a friend).
					  	</p>
					  	<p>
							One way to approach this problem is to directly count all ways you see 1 or more friends. That is hard. You would have to count the ways you could see exactly one friend, then exactly two friends and so on. It is much easier to calculate the ways that you see zero friends. If we can calculate the probability of seeing zero friends our answer is just one minus that number.
						</p>

						<hr/>
						<h2>Prob that you don't see friends</h2>
						<p>
							Let the sample space ($S$) be the set of ways that you could see $s$ people. The size of the sample space is: the total population choose the number of people seen. 
						</p>

						<p>
							The event space ($E$) is the set of ways that you could see no friends. The size of the event space is: the number of non friends (aka population - friends) choose the number of people seen.
						</p>

						<p>Thus the probability of not seeing a friend is:
						</p>

						<p style="font-size:100%">
							$\text{prob(not seen)} = \frac{ \left( {\begin{array}{*{20}c} p - f \\ s \\ \end{array}} \right) } { \left( {\begin{array}{*{20}c} p \\ s \\ \end{array}} \right) } $
						</p>

						<hr/>
						<h2>Prob that you see friends</h2>
						<p>
							Now the probability that you see at least one friend is 1 minus the probability that you see no friends.
						</p>
						<p style="font-size:100%">
							$\text{prob(seen)} = 1 - \frac{ \left( {\begin{array}{*{20}c} p - f \\ s \\ \end{array}} \right) } { \left( {\begin{array}{*{20}c} p \\ s \\ \end{array}} \right) } $
						</p>

						<p>That is equal to <span class="ansValue"></span>

						</p>
						<hr/>
						<h2>Isn't that suprising?</h2>
					</div>
				
				</div>
			</div>



			
		</div>

		
		
		
				
		<script>
			function calculate() {
				var p = parseInt($("#totalPopulation").val())
				var f = parseInt($("#friends").val())
				var s = parseInt($("#seen").val())

				if(s > p) {
					alert("seen must be less than total population");
					return;
				}

				$("#popValue").html(p)
				$("#friendsValue").html(f)
				$("#seenValue").html(s)

				var numeratorTerms = range(p - f - s, p - s);
				var denominatorTerms = range(p - f, p);
				
				var pFalse = divide(numeratorTerms, denominatorTerms)

				var pTrue = 1 - pFalse;

				$(".ansValue").html(pTrue.toFixed(4));

				$("#explination").show()
			}

			function divide(a, b) {
				console.log(a)
				console.log(b)
				var result = 1;
				for(var i = 0; i < a.length; i++) {
					result *= a[i]
					result /= b[i]
				}
				return result;
			}

			function range(start, end) {
				var list = []
				for(var i = start + 1; i <= end; i++) {
					list.push(i);
				}
				return list;
			}

			function choose(n, r) {
				var factR = math.factorial(r)
				var factOther = math.factorial(n - r)
				return math.factorial(n) / (factR * factOther)
			}
			
			
		</script>



<div class="row">
	<div class="col-md-12">
		<hr>

		<div class="footer">
			<p class="pull-left">
				&#169; Stanford 2017 &#124; Created by 
				<a href="http://stanford.edu/~cpiech">Chris</a>.
				CS109 has been developed by many talented teachers. Special thanks to Mehran Sahami.
			</p>
		</div>
	</div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74362126-1', 'auto');
  ga('send', 'pageview');

</script>

	</div>

</body>
